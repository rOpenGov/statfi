[Tilastokeskuksen](http://www.stat.fi/tup/tilastotietokannat/index.html) sivuilta löytyy avoimia aineistoja PC-Axis muodossa. Tilastokeskuksen [avoin data-sivulta](http://www.stat.fi/org/lainsaadanto/avoin_data.html) löytyy kattava listaus avoimista Tilastokeskuksen (statfi) ja Eurostatin aineistoista url-linkkeineen. 


### Statistics Finland and Eurostat open data listing

The listing of [open data sets from Statistics Finland (StatFi) and Eurostat](http://www.stat.fi/org/lainsaadanto/avoin_data.html) are available for browsing:

 * [StatFi (CSV)](http://pxweb2.stat.fi/database/StatFin/StatFin_rap_csv.csv)
 * [StatFi (XML)](http://pxweb2.stat.fi/database/StatFin/StatFin_rap_xml.csv)
 * [Eurostat](http://pxweb2.stat.fi/database/StatFin/StatFin_rap.csv)

You can download these listings in R as follows:

```{r tilastokeskus-1, warning=FALSE, message=FALSE}
# List the open data files available from Statistics Finland
datasets.statfi <- list_statfi_files()

# List the open data files available from Eurostat
datasets.eurostat <- list_eurostat_files()

# Investigate the first entry
print(datasets[1,])

# EuroStat data files, descriptions of the first entries
head(datasets.eurostat$DESCRIPTION)
```

### Kuntien mediaantulot: aineiston haku R-kielellä

Alle on poimittu esimerkiksi kuntien mediaanitulot:

```{r tilastokeskus-2, warning=FALSE, message=FALSE}
# sorvi installation: http://louhos.github.com/sorvi/asennus.html
library(sorvi)

# Define the URL
url <- "http://pxweb2.stat.fi/Database/StatFin/tul/tvt/2009/120_tvt_2009_2011-02-18_tau_112_fi.px"

# Get the data
df <- get_statfi(url)
head(df)
```

### Tilastokeskuksen PC Axis-muotoisten tiedostojen visualisointi

Katso myös [Louhos-blogin](https://louhos.wordpress.com/2011/10/19/tilastokeskuksen-pc-axis-muotoisten-aineistojen-visualisointi-suomen-kartalla/) esimerkki.

```{r tilastokeskus-3, warning=FALSE, message=FALSE}
# Lue Suomen kuntarajat SpatialPolygon-muodossa
# (C) Maanmittauslaitos 2011
# http://www.maanmittauslaitos.fi/aineistot-palvelut/digitaaliset-tuotteet/ilmaiset-aineistot/hankinta
sp <- LoadMML(data.id = "kunta1_p", resolution = "1_milj_Shape_etrs_shape") 

# Kuntatason vaestonkasvutiedot tilastokeskuksen StatFin-tietokannasta
# http://www.stat.fi/tup/statfin/index.html
# df <- get_statfi("http://pxweb2.stat.fi/database/StatFin/vrm/muutl/080_muutl_tau_203.px")

# Lue tiedot kuntien mediaanituloista tilastokeskuksen StatFin-tietokannasta
# http://www.stat.fi/tup/statfin/index.html
# Hae tiedot
df <- get_statfi("http://pxweb2.stat.fi/Database/StatFin/tul/tvt/2009/120_tvt_2009_2011-02-18_tau_112_fi.px")

# Poimi taulukosta halutut tiedot
mediaanitulo <- subset(df, Tiedot == "Veronalaiset tulot, mediaani" & Vuosi == 2009)

# Lisaa tiedot karttaobjektiin
sp@data$mediaanitulo <- mediaanitulo$dat[match(sp$Kunta.FI, mediaanitulo$Kunta)]
# Korvaa puuttuvat arvot nollalla
sp[["mediaanitulo"]][is.na(sp[["mediaanitulo"]])] <- 0

# Piirra kuva
varname <- "mediaanitulo"
int <- max(abs(sp[[varname]]))
q <- PlotShape(sp, varname, type = "oneway",
main = "Kuntien mediaanitulot",
at = seq(-1, int, length = 11))
```


### Versiotiedot

Tämä esimerkki on toteutettu seuraavin versiotiedoin:
 
```{r versiotiedot}
sessionInfo()
```





